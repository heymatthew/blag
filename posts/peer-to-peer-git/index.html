<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=/css/bootstrap.min.css><title>Peer to Peer Git</title></head><body><div class=container><main id=main><h1>Peer to Peer Git</h1><p>Sometimes your central git repository goes down, but you need to share code. That&rsquo;s a bummer, you can commit and wait, but you&rsquo;ve likely heard that you shouldn&rsquo;t need to rely on a central repo.</p><p>So you&rsquo;ve got a few options here:</p><ol><li>Mirror your repo someplace else and switch upstreams during outages,</li><li>email your stuff as patches using [git am][2],
[2]: <a href=https://git-scm.com/docs/git-am>https://git-scm.com/docs/git-am</a></li><li>setup a small read only local git server and pull between neighbours,</li><li>or use some kind of highly available decentralised storage as an upstream like [ipfs git][4].
[4]: <a href=https://github.com/larsks/git-remote-ipfs>https://github.com/larsks/git-remote-ipfs</a></li></ol><p>I feel the easiest thing to do is just to run that read only git option #3. And it&rsquo;s not that hard either, you just need a git alias to run in a shel, and your neighbour to configure and pull from you.</p><h1 id=setting-up-your-repo>Setting up your repo</h1><p>Firstly, create a &lsquo;serve&rsquo; alias for your user so you can share your work&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config --global alias.serve <span style=color:#e6db74>&#34;daemon --verbose --export-all --base-path=.git --reuseaddr --strict-paths .git/&#34;</span>
</span></span></code></pre></div><p>Now navigate to your repo and run it in the foreground&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd $MY_REPO
</span></span><span style=display:flex><span>git serve
</span></span></code></pre></div><p>This should say &ldquo;Ready to rumble&rdquo; followed by log when people connect to you. When you want to shut it down, just it &ldquo;Control C&rdquo; and it&rsquo;ll kill the git server.</p><h1 id=connecting-to-your-neighbour>Connecting to your neighbour</h1><p>Assuming you&rsquo;ve setup your server, you&rsquo;re now going to want to know your IP address or hostname so you can tell other people who to connect to.</p><p>To do this on OSX or Mac (sorry Windows), run ipconfig from a shell and pick your IP out. Usually this is a 192.168.x.x or a 10.x.x.x style network. Usually on Linux that&rsquo;ll be next to a device called wlan0 or eth0, and on OSX en0. If you have a machine name, that can sometimes work to! Just run <code>hostname</code> and note the output.</p><p>From henceforth, I&rsquo;m going to write <code>$YOUR_BOX</code> to represent this thing we just looked up. Just sub in whatever you got from the above.</p><p>Righty ho! Now that you have that, lets get your neighbour connected to <code>$YOUR_BOX</code>! Lets add you to your neighbours remotes&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git remote add neighbour git://$YOUR_BOX/
</span></span><span style=display:flex><span>git fetch neighbour
</span></span></code></pre></div><p>Boom! Now lets set that branch as an upstream!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout master
</span></span><span style=display:flex><span>git branch --set-upstream neighbour
</span></span></code></pre></div><p>If you run a server, and so does your neighbour, the you can pull in each others changes and keep working.</p></main></div></body></html>
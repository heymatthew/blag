<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=/css/bootstrap.min.css><title>Handles in 2016</title></head><body><div class=container><main id=main><h1>Handles in 2016</h1><p>For years I used the name &ldquo;Daemons Advocate&rdquo;. I don&rsquo;t know why, but at some stage I stopped liking it. This got tricky, anytime I get to know a name I start to dislike it.</p><p>Picking a handle is too hard. And everything I came up with is taken by some other schmo on the internets because if you&rsquo;re looking for a good short name in 2016, you&rsquo;re way late to the party.</p><p>Generating a randomly pronouncable name for servers is something <a href=https://twitter.com/tveastman>Tom</a> (a mate of mine) dreamt up and I never got sick of those names.</p><p>So why not go further and use that same technique for usernames? Lets pwgen a short name out of garbage and attach an identity to something pronouncable!</p><p>What do we need?</p><ol><li>A way to generate handles, ala pwgen or counting upwards</li><li>A decent way to check if they&rsquo;re taken, ala twatter 404 headers</li><li>Some way to generate some limited set of passwords to geez at</li></ol><p>I&rsquo;ve been meaning to try make some kind of enumerable for a while, so I&rsquo;m going to try hone that ruby. If you&rsquo;re going to play along at home you&rsquo;re gonna need <code>pwgen</code>, <code>ruby</code> and <code>vim</code> binaries. The last one is not required, but highly recommended ;-).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#66d9ef>HandleGenerator</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>Struct</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>:name_length</span>) <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>next</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> enum_for(<span style=color:#e6db74>:next</span>) <span style=color:#66d9ef>unless</span> block_given?
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>loop</span> { <span style=color:#66d9ef>yield</span> pwgen_name }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>pwgen_name</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>`pwgen -0A </span><span style=color:#e6db74>#{</span>name_length<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span><span style=color:#f92672>.</span>chomp
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Awesome! Now we can pick names!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>name_length <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span>name_enumerator <span style=color:#f92672>=</span> <span style=color:#66d9ef>HandleGenerator</span><span style=color:#f92672>.</span>new(name_length)<span style=color:#f92672>.</span>next
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span><span style=color:#f92672>.</span>times { puts name_enumerator<span style=color:#f92672>.</span>next }
</span></span></code></pre></div><p>But before I continue down that path, I&rsquo;m curious about the shorter handles as these would be hot property. Fun facts:</p><ul><li>Twatter gives 404s for some handles but calls them &ldquo;taken&rdquo; if you go to register them. So a 404 gives a possible name, but not a fo&rsquo; sure name.</li><li>There are 26^2 = 676 handles with 2 chars, and these 15 appear untaken but seem to be reserved: ie, is, wi, hv, he, pb, pu, rp, zb, vy, co, jz, gl, fg and uk</li><li>There are 26^3 = 17,576 handles with 3 chars, and 461 appear to be untaken</li></ul><p>Hitting their API will give me assurance but it&rsquo;s rate limited to 100 hits an hour&ndash; or something. I don&rsquo;t care to read their 1155 word <a href=https://dev.twitter.com/rest/public/rate-limiting>api essay</a> because it&rsquo;s sooooo.</p><p>So brute force 404s, then take the shortlist to the api?</p><p>Woo!</p><p>To get around rate limiting, I&rsquo;m going to try hit public pages that&rsquo;d usually return 404 if the handle isn&rsquo;t taken. I&rsquo;ll let you use your imagination, or read <a href=https://dev.twitter.com/rest/public/rate-limiting>that essay</a> if you want to keep going with that.</p><p>Here&rsquo;s what I ended up with&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>require <span style=color:#e6db74>&#39;net/http&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>HandleAvailable</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>Struct</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>:name</span>) <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>call</span>
</span></span><span style=display:flex><span>    services<span style=color:#f92672>.</span>shuffle<span style=color:#f92672>.</span>all? <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>service<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>      response_code(<span style=color:#e6db74>:from</span> <span style=color:#f92672>=&gt;</span> service) <span style=color:#f92672>==</span> <span style=color:#ae81ff>404</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>response_code</span>(<span style=color:#e6db74>from</span>:)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>Net</span><span style=color:#f92672>::</span><span style=color:#66d9ef>HTTP</span><span style=color:#f92672>.</span>get_response(from)<span style=color:#f92672>.</span>code<span style=color:#f92672>.</span>to_i
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>services</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>URI</span><span style=color:#f92672>.</span>parse(<span style=color:#e6db74>&#34;https://twitter.com/</span><span style=color:#e6db74>#{</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>),
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>URI</span><span style=color:#f92672>.</span>parse(<span style=color:#e6db74>&#34;https://github.com/</span><span style=color:#e6db74>#{</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>),
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>URI</span><span style=color:#f92672>.</span>parse(<span style=color:#e6db74>&#34;https://disqus.com/by/</span><span style=color:#e6db74>#{</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>/&#34;</span>),
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>URI</span><span style=color:#f92672>.</span>parse(<span style=color:#e6db74>&#34;https://www.youtube.com/user/</span><span style=color:#e6db74>#{</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>),
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>URI</span><span style=color:#f92672>.</span>parse(<span style=color:#e6db74>&#34;http://</span><span style=color:#e6db74>#{</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>.tumblr.com/&#34;</span>),
</span></span><span style=display:flex><span>    <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>NextAvailableHandle</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>Struct</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>:name_generator</span>) <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>next</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> enum_for(<span style=color:#e6db74>:next</span>) <span style=color:#66d9ef>unless</span> block_given?
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>loop</span> <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>yield</span> next_available_name
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>next_available_name</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>loop</span> <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>      name <span style=color:#f92672>=</span> name_generator<span style=color:#f92672>.</span>next
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> name <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>HandleAvailable</span><span style=color:#f92672>.</span>new(name)<span style=color:#f92672>.</span>call
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>name_enumerator <span style=color:#f92672>=</span> <span style=color:#66d9ef>HandleGenerator</span><span style=color:#f92672>.</span>new(name_length)<span style=color:#f92672>.</span>next
</span></span><span style=display:flex><span>search_enumerator <span style=color:#f92672>=</span> <span style=color:#66d9ef>NextAvailableHandle</span><span style=color:#f92672>.</span>new(name_enumerator)<span style=color:#f92672>.</span>next
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># find me 10 usernames that might be untaken</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span><span style=color:#f92672>.</span>times <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  puts search_enumerator<span style=color:#f92672>.</span>next
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Now what you end up with does need a bit of human filtering based on taste, but they&rsquo;re all pronouncable. To sample&ndash; eitohs, ohphah, and voatee are all names that came out of running this.</p><p>All stories deserve a happy ending. I found that I liked the name <code>@wohyah</code> and I don&rsquo;t think that&rsquo;s half bad!</p></main></div></body></html>